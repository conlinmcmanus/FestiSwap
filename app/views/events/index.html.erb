<script type="text/javascript">
function initMap() {}
</script>
<script type="text/javascript"> 
  $(document).ready( function() {
    $('#texttohide').delay(5000).fadeOut();
  });
</script>
<p id="texttohide" class="loading">It may take a moment to obtain your current location. Please wait</p> 
<table class="card table col s12 m8">
  <thead>
    <h3>Your Location & Events Circles:</h3>
  </tbody>
</table>
<div class="card" style="width: auto;">
<script type="text/javascript">
$(document).ready(initMap());
$(document).ready(navigator.geolocation.getCurrentPosition(locationSuccess, locationFail));
</script>
<div id="map" style="position: auto; overflow: auto; height: 400px; width: auto;"></div>
  <script async defer src="https://maps.googleapis.com/maps/api/js?key=<%= ENV['google_maps_key'] %>&callback=initMap">
  </script>
  </div>
<table class="card table highlight bordered s10">
  <thead>
    <h3>Events</h3>
  </thead>
  <tbody>
    <% count = 0 %>
    <% @events.each do |event| %>
    <tr class="card">
      <td colspan="3">
      <img alt="" class="circle responsive-img"><%= image_tag event.file.url(:thumb) %></img>
      </td>
      <td colspan="3">
        <a href="<%= event_path(event) %>">
          <%= event.title %>
        </a>
      </td>
      <td id="event<%= count %>_latitude">
        <sub><%= event.address %></sub>
      </td>
      <td class="hide-on-med-and-down">
        <div class="hide-on-med-and-down"></div>
        <sub><%= event.description %></sub>
      </td>
    </tr>
    <% count += 1 %>
    <% end %>
  </tbody>
</table>
<button>
<%= link_to 'Back', root_path %>
</button>
<% if current_user %>
<button>
  <%= link_to 'New Event', new_event_path %>
  </button>
<% end %>